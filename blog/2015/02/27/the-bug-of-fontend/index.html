
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>那些年，在前端路上踩过的坑 - 潭风</title>
  <meta name="author" content="senola">

  
  <meta name="description" content="那些年，在前端路上踩过的坑 Feb 27th, 2015 |&nbsp; 大千世界，齐路万千。一不小心踩坑，深陷囵圄。几番周折，才得以逃脱。。。痛，来自爱。因爱生痛，痛的彻底，痛的刻骨。大爱前端，所以逢坑必填。试想，多年之后回首，万千平路，皆吾填之。故，坑，必填也。 目录 一、 &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://senola.github.io/blog/2015/02/27/the-bug-of-fontend/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/stylesheets/senola.css" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/jquery-1.11.0.min.js" type="text/javascript"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/senolablog.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!-- codepen embed js-->
  <script async src="//assets.codepen.io/assets/embed/ei.js"></script>
  
  <!-- 多说公共JS代码 start (一个网页只需插入一次) -->
  <script type="text/javascript">
  var duoshuoQuery = {short_name:"senola"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0] 
       || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
    </script>
  <!-- 多说公共JS代码 end -->
  
  <!--google_analytics-->
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-60141994-2']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


  <!--Fonts from Google"s Web font directory at http://google.com/webfonts 
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
-->
  <link href="/atom.xml" rel="alternate" title="潭风" type="application/atom+xml">

</head>
<body   >
  <nav role="navigation">    <ul class="subscription" data-subscription="rss">
  <li><a href="javascript:searchkeys()"  title="search">搜索</a></li>
  
</ul>
 
<form action="http://www.baidu.com/s" method="get" id="googlesearch">
  <fieldset role="search">
    <input name="wd" id="searchkeys_senola" type="hidden"/>
    <input class="search" id="input_keywords_senola" type="text" results="0" placeholder="Search"/>
  </fieldset>
 </form>

<ul class="main-navigation">
    <li><a href="/">
        <span class="blue_light">
            潭风
        </span>
       
    </a></li>
  <li><a href="/blog/index.html">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/about">About me</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content" style="margin-top:5px;">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title" style="font-size: 30px;">那些年，在前端路上踩过的坑</h1>
    
    
      <p class="meta" style="width:250px">
        








  


<time datetime="2015-02-27T21:38:35+08:00" pubdate data-updated="true">Feb 27<span>th</span>, 2015</time>
        
        

        
          |&nbsp;<a href="#comments"style="text-decoration: none;"><span class="ds-thread-count" data-thread-key="" style="font-size: 14px;color: darkgray;"></span></a>
         
      </p>
    
  </header>


<div class="entry-content"><p>大千世界，齐路万千。一不小心踩坑，深陷囵圄。几番周折，才得以逃脱。。。痛，来自爱。因爱生痛，痛的彻底，痛的刻骨。大爱前端，所以逢坑必填。试想，多年之后回首，万千平路，皆吾填之。故，坑，必填也。</p>

<!--more-->


<h3><a name="list">目录</a></h3>

<ul>
<li><a href="#0001" class="senola-a">一、input框设置width:100%溢出父类容器</a></li>
<li><a href="#0002" class="senola-a">二、safari下input输入框有内描边及webkit css 整理</a></li>
<li><a href="#0003" class="senola-a">三、移动端最佳使用单位](#0003)</a></li>
<li><a href="#0004" class="senola-a">四、模拟:hover伪类</a></li>
<li><a href="#0005" class="senola-a">五、input类型为date情况下不支持placeholder</a></li>
<li><a href="#0006" class="senola-a">六、active的兼容</a></li>
<li><a href="#0007" class="senola-a">七、测试是否支持svg</a></li>
<li><a href="#0008" class="senola-a">八、ios下的隐私模式</a></li>
<li><a href="#0009" class="senola-a">九、关于 iOS 系统中，中文输入法输入英文时，字母之间可能会出现一个六分之一空格</a></li>
<li><a href="#0010" class="senola-a">十、关于音频跟视频</a></li>
</ul>


<h3><a name="0001">一、input框设置width:100%,溢出父类容器</a></h3>

<p>2014,已去！为迎接新的一年公司会在除夕之时搞一场大型活动。而我，有幸参与此次活动的研发。是的，坑就是在这中情况下来的。</p>

<p>我们知道，浏览器是一种很神奇的东西（此处省略一万字）。各种奇形怪状，杂七杂八的BUG随处可见。这不，我就在input标签中踩着了。。。</p>

<p><strong>情景：</strong> 项目引入了标准的normalize.css, 整个页面设在一个<code>&lt;div class="container"&gt;&lt;/div&gt;</code>下，由她来控制整个文档流整体的在页面中的显示（如居中，与两边的宽度等）。之后在其内部有一个input输入框，为了让其跨浏览器显示一般我们会将元素的宽度设置成百分比，即设置input的宽度为“100%”，那么问题来了：在PC浏览器上显示正常，但在移动端偏偏input越界了。这令我很是费解，尝试了N中方法就是不行，差点就选择用绝对长度来定位了。如下图：</p>

<p><img src="https://raw.githubusercontent.com/senola/pictures/master/css/input/input-width-100%25-wrong.png" alt="input-width-100%25-wrong.png" /></p>

<p><strong>解决方法：</strong>没事找我，有事找谷歌。overstack是个好东西，几乎你遇到的问题别人都遇到过了。结果增加了以下代码就ok了：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>input {   
</span><span class='line'> width: 100%;     
</span><span class='line'> box-sizing: border-box;   
</span><span class='line'> -webkit-box-sizing:border-box;   
</span><span class='line'> -moz-box-sizing: border-box;   
</span><span class='line'>}  </span></code></pre></td></tr></table></div></figure>


<p>效果如下：</p>

<p><img src="https://raw.githubusercontent.com/senola/pictures/master/css/input/input-wdth-100%25-ok.png" alt="input-wdth-100%25-ok.png" /></p>

<p>那么这究竟是为什么呢？为此特意去study了一下&hellip;</p>

<p>我们知道每一个元素都有一个盒模型，而世界上存在两种计算元素宽度的方式： 一种是W3C的标准（宽度及为元素的宽度，不包括padding和border），另一种是传统的盒模型（宽度包括了了元素自身的宽度再加上padding和border）。</p>

<p>浏览器一般都是默认按照W3C标准盒模型来计算元素宽度的（除了IE的“Quirks Mode”）.</p>

<p>比如：两种模式下相同样式不同结果</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>.demo {
</span><span class='line'>  width: 250px;
</span><span class='line'>  height: 100px;
</span><span class='line'>  border: 5px solid #6374AB;
</span><span class='line'>  padding: 10px;
</span><span class='line'>}
</span></code></pre></td></tr></table></div></figure>


<p>第一个使用传统的盒模型，第二个使用W3C的盒模型，效果如下：</p>

<p><img src="https://raw.githubusercontent.com/senola/pictures/master/css/box-model/box.gif" alt="box.gif" /></p>

<p>区别很明显，传统的盒模型中元素的宽度就是content + padding + border,而
W3C的盒模型中元素的宽度是content。这就解释了为什么input输入框设置了100%会超出父类宽度了。因为当时环境中是width=100%，但padding和border不包括在这100%的宽度中，故渲染出来的宽度大于100%。</p>

<p>显然，按照传统的盒模型比较好控制。css3中出现了<code>box-sizing</code>属性，允许你切换盒模型：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>box-sizing: border-box;
</span><span class='line'>box-sizing: content-box;</span></code></pre></td></tr></table></div></figure>


<p><code>box-sizing: border-box</code>表示元素的大小是包括border以内的所有宽度，即传统盒模型，而<code>box-sizing: content-box</code>表示元素的宽度即content的宽度，不包括<code>padding、border</code>。</p>

<p><code>Mozilla</code>支持<code>padding-box</code>,即表示元素的大小是padding以内的宽度，不包括<code>border</code>。</p>

<p>更精确的测试如下：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'> div.test {
</span><span class='line'>  width: 300px;
</span><span class='line'>  padding: 10px;
</span><span class='line'>  border: 5px solid #000000;
</span><span class='line'>  margin-left: 10%;
</span><span class='line'>  margin-bottom: 10px;
</span><span class='line'>  margin-top: 10px;
</span><span class='line'> }</span></code></pre></td></tr></table></div></figure>


<p>效果如下：</p>

<p><img src="https://raw.githubusercontent.com/senola/pictures/master/css/box-model/box-model-test.png" alt="box-model-test.png" /></p>

<p>经此一役，恍然大悟。于是在normalize.css加上一下代码，确保万无一失：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>/*清除浮动*/
</span><span class='line'>.clearfix:before, .clearfix:after {
</span><span class='line'>  content: '';
</span><span class='line'>  display: table;
</span><span class='line'>}
</span><span class='line'>.clearfix:after {
</span><span class='line'>  clear: both;
</span><span class='line'>  overflow: hidden;
</span><span class='line'>}
</span><span class='line'>.clearfix {
</span><span class='line'>  zoom: 1;
</span><span class='line'>}
</span><span class='line'>/*设置所有元素为传统盒模型*/
</span><span class='line'>*,
</span><span class='line'>*:before,
</span><span class='line'>*:after {
</span><span class='line'>  -webkit-box-sizing: border-box;
</span><span class='line'>  -moz-box-sizing: border-box;
</span><span class='line'>  box-sizing: border-box;
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<h3><a name="0002">二、safari下input输入框有内描边及webkit css 整理</a></h3>

<p>webkit内核浏览器默认会给input输入框加上内描边，这对专业的设计师来说是不能容忍的。而前端叉子们就得想尽办法出去她~ 多悲伤啊，人家浏览器也是为了你好，至于么？？？？  代码如下：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>input {
</span><span class='line'>   -webkit-appearance: none; // Safari 去掉内阴影
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>移动端中，使用click会出现绑定点击区域有高亮背景，修改背景颜色方法：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>  input{
</span><span class='line'>  -webkit-tap-highlight-color: rgba(0,0,0,0); // 设置点击区域的颜色
</span><span class='line'>  }</span></code></pre></td></tr></table></div></figure>


<p>ios中滑动效果：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>body{
</span><span class='line'>  -webkit-overflow-scrolling: touch;
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>好吧，webkit属性太多，整体把握才是王道，于是整理如下：</p>

<h5>1. &ldquo;box model&#8221;相关，包括content、padding、margin等</h5>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>-webkit-border-bottom-left-radius: radius;
</span><span class='line'>-webkit-border-top-left-radius: horizontal_radius vertical_radius;
</span><span class='line'>-webkit-border-radius: radius;      //容器圆角
</span><span class='line'>-webkit-box-sizing: sizing_model; 边框常量值：border-box/content-box
</span><span class='line'>-webkit-box-shadow: hoff voff blur color; //容器阴影（参数分别为：水平X 方向偏移量；垂直Y 方向偏移量；高斯模糊半径值；阴影颜色值）
</span><span class='line'>-webkit-margin-bottom-collapse: collapse_behavior; 常量值：collapse/discard/separate
</span><span class='line'>-webkit-margin-start: width;
</span><span class='line'>-webkit-padding-start: width;
</span><span class='line'>-webkit-border-image: url(borderimg.gif) 25 25 25 25 round/stretch round/stretch;
</span><span class='line'>-webkit-appearance: push-button;   //内置的CSS 表现，暂时只支持push-button
</span></code></pre></td></tr></table></div></figure>


<h5>2. 视觉格式化模型”描述性质，确定了位置和大小的块元素</h5>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>clip: rect(10px, 5px, 10px, 5px)
</span><span class='line'>resize: auto; 常量：auto/both/horizontal/none/vertical
</span><span class='line'>visibility: visible; 常量: collapse/hidden/visible
</span><span class='line'>-webkit-transition: opacity 1s linear; 动画效果 ease/linear/ease-in/ease-out/ease-in-out
</span><span class='line'>-webkit-backface-visibility: visibler; 常量：visible(默认值)/hidden
</span><span class='line'>-webkit-box-reflect: right 1px; //镜向反转
</span><span class='line'>-webkit-box-reflect: below 4px -webkit-gradient(linear, left top, left bottom,from(transparent), color-stop(0.5, transparent), to(white));
</span><span class='line'>-webkit-mask-image: -webkit-gradient(linear, left top, left bottom, from(rgba(0,0,0,1)), to(rgba(0,0,0,0)));;   //CSS 遮罩/蒙板效果
</span><span class='line'>-webkit-mask-attachment: fixed; 常量：fixed/scroll
</span><span class='line'>-webkit-perspective: value; 常量：none(默认)
</span><span class='line'>-webkit-perspective-origin: left top;
</span><span class='line'>-webkit-transform: rotate(5deg);
</span><span class='line'>-webkit-transform-style: preserve-3d; 常量：flat/preserve-3d; (2D 与3D)</span></code></pre></td></tr></table></div></figure>


<h5>3.“颜色和背景”描述属性控制背景下的块级元素和颜色的文本内容的组成部分</h5>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>-webkit-background-clip: content; 常量：border/content/padding/text
</span><span class='line'>-webkit-background-origin: padding; 常量：border/content/padding/text
</span><span class='line'>-webkit-background-size: 55px; 常量：length/length_x/length_y</span></code></pre></td></tr></table></div></figure>


<h5>4. “文本”描述属性的特定文字样式，间距和自动滚屏</h5>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class=''><span class='line'> text-shadow: #00FFFC 10px 10px 5px;
</span><span class='line'> text-transform: capitalize; 常量：capitalize/lowercase/none/uppercase
</span><span class='line'> word-wrap: break-word; 常量：break-word/normal
</span><span class='line'>-webkit-marquee: right large infinite normal 10s; 常量：direction(方向) increment(迭代次数) repetition(重复) style(样式) speed(速度);
</span><span class='line'>-webkit-marquee-direction: ahead/auto/backwards/down/forwards/left/reverse/right/up
</span><span class='line'>-webkit-marquee-incrementt: 1-n/infinite(无穷次)
</span><span class='line'>-webkit-marquee-speed: fast/normal/slow
</span><span class='line'>-webkit-marquee-style: alternate/none/scroll/slide
</span><span class='line'>-webkit-text-fill-color: #ff6600; 常量：capitalize, lowercase, none, uppercase  
</span><span class='line'>-webkit-text-security: circle; 常量：circle/disc/none/square  // 如密码输入框使用该属性
</span><span class='line'>-webkit-text-size-adjust: none; 常量:auto/none; //阻止屏幕旋转时字体自动调整
</span><span class='line'>-webkit-text-stroke: 15px #fff;
</span><span class='line'>-webkit-line-break: after-white-space; 常量：normal/after-white-space
</span><span class='line'>-webkit-appearance: caps-lock-indicator;
</span><span class='line'>-webkit-nbsp-mode: space; 常量： normal/space
</span><span class='line'>-webkit-rtl-ordering: logical; 常量：visual/logical
</span><span class='line'>-webkit-user-drag: element; 常量：element/auto/none
</span><span class='line'>-webkit-user-modify: read-only; 常量：read-write-plaintext-only/read-write/read-only
</span><span class='line'>-webkit-user-select: text; 常量：text/auto/none  // 是否允许用户选中文本
</span><span class='line'>-webkit-touch-callout:none  //禁止 iOS 弹出各种操作窗口
</span><span class='line'>input::-webkit-input-speech-button {display: none} // Andriod 上去掉语音输入按钮</span></code></pre></td></tr></table></div></figure>


<h5>5. “表格”描述的布局和设计性能表的具体内容</h5>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>-webkit-border-horizontal-spacing: 2px;
</span><span class='line'>-webkit-border-vertical-spacing: 2px;
</span><span class='line'>-webkit-column-break-after: right; 常量：always/auto/avoid/left/right
</span><span class='line'>-webkit-column-break-before: right; 常量：always/auto/avoid/left/right
</span><span class='line'>–webkit-column-break-inside: logical; 常量：avoid/auto
</span><span class='line'>-webkit-column-count: 3; //分栏
</span><span class='line'>-webkit-column-rule: 1px solid #fff;
</span><span class='line'>style:dashed,dotted,double,groove,hidden,inset,none,outset,ridge,solid</span></code></pre></td></tr></table></div></figure>


<h5>6. “用户界面”描述属性，涉及到用户界面元素在浏览器中，如滚动文字区，滚动条，等等</h5>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>-webkit-box-align: baseline,center,end,start,stretch 常量：baseline/center/end/start/stretch
</span><span class='line'>-webkit-box-direction: normal;常量：normal/reverse
</span><span class='line'>-webkit-box-flex: flex_valuet
</span><span class='line'>-webkit-box-flex-group: group_number
</span><span class='line'>-webkit-box-lines: multiple; 常量：multiple/single
</span><span class='line'>-webkit-box-ordinal-group: group_number
</span><span class='line'>-webkit-box-orient: block-axis; 常量：block-axis/horizontal/inline-axis/vertical/orientation
</span><span class='line'>–webkit-box-pack: alignment; 常量：center/end/justify/start</span></code></pre></td></tr></table></div></figure>


<h5>7. 动画过渡</h5>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>-webkit-animation: title infinite ease-in-out 3s;
</span><span class='line'>animation 有这几个属性：
</span><span class='line'>-webkit-animation-name： //属性名，就是我们定义的keyframes
</span><span class='line'>-webkit-animation-duration：3s //持续时间
</span><span class='line'>-webkit-animation-timing-function： //过渡类型：ease/ linear(线性) /ease-in(慢到快)/ease-out(快到慢) /ease-in-out(慢到快再到慢) /cubic-bezier
</span><span class='line'>-webkit-animation-delay：10ms //动画延迟(默认0)
</span><span class='line'>-webkit-animation-iteration-count： //循环次数(默认1)，infinite 为无限
</span><span class='line'>-webkit-animation-direction： //动画方式：normal(默认 正向播放)； alternate(交替方向，第偶数次正向播放，第奇数次反向播放)</span></code></pre></td></tr></table></div></figure>


<h3><a name="0003">三、移动端最佳使用单位</a></h3>

<p>移动端使用什么单位是开发者最迫切需要知道的，px、%、pt、em 还是rem？ 当然是rem。rem是非常好用的一个属性，可以根据html来设定基准值，而且兼容性也很不错。不过有的时候还是需要对一些莫名其妙的浏览器优雅降级。可以用以下的代码片段保证在低端浏览器下也不会出问题：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>html { font-size: 62.5%; }
</span><span class='line'>body { font-size: 14px; font-size: 1.4rem; } /* =14px */
</span><span class='line'>h1   { font-size: 24px; font-size: 2.4rem; } /* =24px */</span></code></pre></td></tr></table></div></figure>


<h3><a name="0004">四、模拟:hover伪类</a></h3>

<p>由于移动端没有鼠标指针，所以没有hover事件，所以css:hover伪类就没用了。但是移动端有touch事件，onTouchStart 类似 onMouseOver，onTouchEnd 类似 onMouseOut。所以我们可以用它来模拟hover。使用Javascript：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>var myLinks = document.getElementsByTagName('a');
</span><span class='line'>for(var i = 0, len = myLinks.length ; i &lt; len; i++){
</span><span class='line'>　　myLinks[i].addEventListener(’touchstart’, function(){this.className = “hover”;}, false);
</span><span class='line'>　　myLinks[i].addEventListener(’touchend’, function(){this.className = “”;}, false);
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>然后用css增加hover效果：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>a:hover, a:hover {/* 你要的效果*/}</span></code></pre></td></tr></table></div></figure>


<p>这样设计一个链接，感觉可以更像按钮。并且，这个模拟可以用在任何元素上。</p>

<h3><a name="0005">五、input类型为date情况下不支持placeholder</a></h3>

<p>由于浏览器会针对date类型的input增加datepicker模块，所以有些系统不支持placeholder:</p>

<p>桌面端（Mac）
&ndash; Safari 不支持 datepicker，placeholder 正常显示。
&ndash; Firefox 不支持 datepicker，placeholder 正常显示。
&ndash; Chrome 支持 datepicker，显示 年、月、日 格式，忽略placeholder。</p>

<p>移动端
&ndash; iPhone5 iOS7 有 datepicker 功能，但是不显示 placeholder。
&ndash; Andorid 4.0.4 无 datepicker 功能，不显示 placeholder</p>

<p>解决方法：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;input placeholder="Date" class="textbox-n" type="text" onfocus="(this.type='date')"  id="date"&gt;</span></code></pre></td></tr></table></div></figure>


<p>因为text是支持placeholder的。因此当用户focus的时候自动把type类型改变为date，这样既有placeholder也有datepicker了。</p>

<h3><a name="0006">六、active的兼容</a></h3>

<p>要让a链接的CSS active伪类生效，只需要给这个a链接的touch系列的任意事件touchstart/touchend绑定一个空的匿名方法即可hack成功:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;style&gt;
</span><span class='line'>  a {
</span><span class='line'>  color: #000;
</span><span class='line'>  }
</span><span class='line'>  a:active {
</span><span class='line'>  color: #fff;
</span><span class='line'>  }
</span><span class='line'>&lt;/style&gt;
</span><span class='line'>&lt;a herf=”asdasd”&gt;asdasd&lt;/a&gt;
</span><span class='line'>&lt;script&gt;
</span><span class='line'>  var a=document.getElementsByTagName(‘a’);
</span><span class='line'>  for(var i=0;i&lt;a.length;i++){
</span><span class='line'>  a[i].addEventListener(‘touchstart’,function(){},false);
</span><span class='line'>  }
</span><span class='line'>&lt;/script&gt;</span></code></pre></td></tr></table></div></figure>


<h3><a name="0007">七、测试是否支持svg</a></h3>

<p>用以下代码：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>document.implementation.hasFeature("http:// www.w3.org/TR/SVG11/feature#Image", "1.1");</span></code></pre></td></tr></table></div></figure>


<h3><a name="0008">八、ios下的隐私模式</a></h3>

<p>这个“隐私模式”是最容易被忽视的。ios的safari提供一种“隐私模式”，如果你的webapp没有考虑这个兼容模式，那么在使用html5的本地存储的“localstorage”时，可能因为“隐私模式”下没有权限读写localstorage而使代码抛出错误，导致后续的js代码无法运行~</p>

<p>所以在使用localstorage的时候，首先应该判断是否支持localstorage。但是问题又来了：测试发现，即使在safari的“隐私模式”下，’localStorage’ in window的返回值依然为true，也就是不能用“&#8217;localStorage&#8217; in window”来判断。接下来只能相当使用try catch了，虽然这是一个不太推荐被使用的方法，使用try catch捕获错误，使后续的js代码可以继续运行，代码如下：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>try{
</span><span class='line'>    if('localStorage' in window){
</span><span class='line'>         //需要使用localStorage的代码写在这
</span><span class='line'>    }else{
</span><span class='line'>         //不支持的提示和向下兼容代码
</span><span class='line'>    }
</span><span class='line'>}catch(e){
</span><span class='line'>    // 隐私模式相关提示代码和不支持的提示和向下兼容代码
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>所以，在需要兼容ios的safari的“隐私模式”的情况下，本地存储相关的代码需要使用try catch包裹并降级兼容。如果不知道的话，呵呵，那就惨了！！！！！</p>

<h3><a name="0009">九、中文输入法输入英文，字母之间可能会出现一个六分之一空格</a></h3>

<p>关于 iOS 系统中，中文输入法输入英文时，字母之间可能会出现一个六分之一空格，可以使用正则表达式过滤：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>this.value = this.value.replace(/\u2006/g, '');</span></code></pre></td></tr></table></div></figure>


<h3><a name="0010">十、关于音频跟视频</a></h3>

<p>代码：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;audio autoplay&gt;
</span><span class='line'>  &lt;source  src="audio/alarm1.mp3" type="audio/mpeg"&gt;
</span><span class='line'>&lt;/audio&gt;</span></code></pre></td></tr></table></div></figure>


<p>如上代码，系统默认情况下audio的autoplay属性是无法生效的，这也是手机为节省用户流量做的考虑。如果必须要自动播放，有两种方式可以解决。</p>

<h5>1.捕捉一次用户输入后，让音频加载，下次即可播放</h5>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>//play and pause it once
</span><span class='line'>document.addEventListener('touchstart', function () {
</span><span class='line'>    document.getElementsByTagName('audio')[0].play();
</span><span class='line'>    document.getElementsByTagName('audio')[0].pause();
</span><span class='line'>});</span></code></pre></td></tr></table></div></figure>


<p>这种方法需要捕获一次用户的点击事件来促使音频跟视频加载。当加载后，你就可以用javascript控制音频的播放了，如调用audio.play().</p>

<h5>2. 利用iframe加载资源</h5>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>var ifr=document.createElement("iframe");
</span><span class='line'>ifr.setAttribute('src', "http://mysite.com/myvideo.mp4");
</span><span class='line'>ifr.setAttribute('width', '1px');
</span><span class='line'>ifr.setAttribute('height', '1px');
</span><span class='line'>ifr.setAttribute('scrolling', 'no');
</span><span class='line'>ifr.style.border="0px";
</span><span class='line'>document.body.appendChild(ifr);</span></code></pre></td></tr></table></div></figure>


<p>这种方式其实跟第一种原理是一样的。当资源加载了你就可以控制播放了，但是这里使用iframe来加载，相当于直接触发资源加载。 注意，使用创建audio标签并让其加载的方式是不可行的。 慎用这种方法，会对用户造成很糟糕的影响。</p>

<p><span style="font-weight:bold;color:green;font-size:18px;">&gt;&gt; 持续踩坑中&hellip;</span></p>
</div>

<script type="text/javascript">
  var duoshuoQuery = {short_name:"senola"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = 'http://static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();

</script>

  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">senola</span></span>

      








  


<time datetime="2015-02-27T21:38:35+08:00" pubdate data-updated="true">Feb 27<span>th</span>, 2015</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/css/'>css</a>
  
</span>


    </p>
    
      <div class="jiathis_style">
	<a class="jiathis_button_qzone">QQ空间</a>
	<a class="jiathis_button_tsina">新浪微博</a>
	<a class="jiathis_button_tqq">腾讯微博</a>
	<a class="jiathis_button_weixin">微信</a>
	<a class="jiathis_button_renren">人人</a>
	<a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a>
	<a class="jiathis_counter_style"></a>
</div>
<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=1395931837170924" charset="utf-8"></script>
<script type="text/javascript">
$(document).ready(function(){
	$(".flash-video").remove();
});
</script>
    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2014/12/23/css-border/" title="Previous Post: css之border的拓展">&laquo; css之border的拓展</a>
      
      
        <a class="basic-alignment right" href="/blog/2015/03/10/the-ways-of-center-element/" title="Next Post: 元素居中的那些事儿">元素居中的那些事儿 &raquo;</a>
      
    </p>
  </footer>
</article>



  <section>
    <h1>文章评论</h1>
    <div id="comments" aria-live="polite"><!-- 多说评论框 start -->
<div class="ds-thread" data-thread-key="/blog/2015/02/27/the-bug-of-fontend" data-title="那些年，在前端路上踩过的坑" data-url="http://senola.github.io/blog/2015/02/27/the-bug-of-fontend/"></div>
<!-- 多说评论框 end --></div>
  </section>


</div>

<aside class="sidebar">
  
    <section>
  <h1>最近文章</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/03/10/the-ways-of-center-element/">元素居中的那些事儿</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/02/27/the-bug-of-fontend/">那些年，在前端路上踩过的坑</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/12/23/css-border/">css之border的拓展</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/11/13/head-tag/">HTML head 头标签</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/10/27/how-browsers-work/">浏览器到底是咋工作的？</a>
      </li>
    
  </ul>
</section>
<section>
  <h1>访客地图</h1>
  <script type="text/javascript" src="http://jk.revolvermaps.com/2/1.js?i=ajmx3htkhpt&amp;s=220&amp;m=0&amp;v=true&amp;r=false&amp;b=000000&amp;n=false&amp;c=ff0000" async="async"></script>
</section><section>
    <h1>新浪微博</h1>
    <ul id="weibo">
    <li>

    <iframe width="100%" height="550" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=550&fansRow=1&ptype=1&speed=100&skin=5&isTitle=1&noborder=1&isWeibo=1&isFans=1&uid=2197383192&verifier=efad6eae&dpc=1"></iframe>

      </li>
    </ul>
</section>
  
</aside>



    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - senola -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  <!--返回顶部开始-->
<div id="full" class="senola-top-full">
    <a href="javascript:goTop();" ><img id="topshow"src="/images/top.png" width="45px" height="120px"  border=0 alt="返回顶部" ></a>
</div>
<script src="/javascripts/top.js" type="text/javascript"></script>
<!--返回顶部结束-->
  











</body>
</html>
